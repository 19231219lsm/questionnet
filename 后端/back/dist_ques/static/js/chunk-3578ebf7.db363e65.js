(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3578ebf7"],{1071:function(e,t,n){"use strict";n.r(t);n("a4d3"),n("e01a");var s=n("7a23");Object(s["M"])("data-v-57f6495e");var r={id:"nav"},i={id:"realNav"},o=Object(s["n"])("img",{src:"https://pic1.zhimg.com/v2-5dfc909d8627c054a6f66f978831a0de_1440w.jpg?source=172ae18b",alt:""},null,-1),u=Object(s["n"])("h1",null,"问卷星球",-1),a={id:"btn"},c=Object(s["q"])("保存"),l=Object(s["q"])("发布"),d={id:"Edit"},h={id:"left"},f=Object(s["n"])("div",{class:"title"}," 题目控件 ",-1),v={class:"questionList"},b=Object(s["n"])("i",{class:"el-icon-success"},null,-1),y=Object(s["q"])(" 单选题 "),p=[b,y],g=Object(s["n"])("i",{class:"el-icon-s-fold"},null,-1),m=Object(s["q"])(" 多选题 "),O=[g,m],j=Object(s["n"])("i",{class:"el-icon-s-order"},null,-1),C=Object(s["q"])(" 填空题 "),k=[j,C],T=Object(s["n"])("i",{class:"el-icon-star-on"},null,-1),$=Object(s["q"])(" 评分题 "),w=[T,$],x=Object(s["n"])("i",{class:"el-icon-document-checked"},null,-1),D=Object(s["q"])(" 判断题 "),q=[x,D],S={class:"option"},A=Object(s["q"])(" 自动插入题号 "),J={class:"option"},R={id:"right"},E={id:"platform"},M={id:"surveyTitle"},_={id:"surveyIntro"},B=["onDragstart","onDragover","onDragenter","onDragend"],V={key:5,class:"tool"},I=Object(s["q"])("编辑"),U=Object(s["q"])("删除"),L=Object(s["q"])("复制");function P(e,t,n,b,y,g){var m=this,j=Object(s["S"])("el-button"),C=Object(s["S"])("el-date-picker"),T=Object(s["S"])("Radio"),$=Object(s["S"])("Checkbox"),x=Object(s["S"])("Text"),D=Object(s["S"])("Evaluation"),P=Object(s["S"])("Judge");return Object(s["J"])(),Object(s["m"])(s["b"],null,[Object(s["n"])("div",r,[Object(s["n"])("div",i,[o,u,Object(s["n"])("span",{onClick:t[0]||(t[0]=function(){return g.tomanage&&g.tomanage.apply(g,arguments)})},"个人问卷")]),Object(s["n"])("div",a,[Object(s["r"])(j,{id:"safe",onClick:g.saveSurvey},{default:Object(s["hb"])((function(){return[c]})),_:1},8,["onClick"]),Object(s["r"])(j,{id:"release",onClick:g.releaseSurvey},{default:Object(s["hb"])((function(){return[l]})),_:1},8,["onClick"])])]),Object(s["n"])("div",d,[Object(s["n"])("div",h,[f,Object(s["n"])("div",v,[Object(s["n"])("div",{class:"questionType",onClick:t[1]||(t[1]=function(){return g.addRadio&&g.addRadio.apply(g,arguments)})},p),Object(s["n"])("div",{class:"questionType",onClick:t[2]||(t[2]=function(){return g.addCheckbox&&g.addCheckbox.apply(g,arguments)})},O),Object(s["n"])("div",{class:"questionType",onClick:t[3]||(t[3]=function(){return g.addText&&g.addText.apply(g,arguments)})},k),Object(s["n"])("div",{class:"questionType",onClick:t[4]||(t[4]=function(){return g.addEvaluation&&g.addEvaluation.apply(g,arguments)})},w),Object(s["n"])("div",{class:"questionType",onClick:t[5]||(t[5]=function(){return g.addJudge&&g.addJudge.apply(g,arguments)})},q),Object(s["n"])("div",S,[Object(s["ib"])(Object(s["n"])("input",{type:"checkbox","onUpdate:modelValue":t[6]||(t[6]=function(e){return y.needOrder=e})},null,512),[[s["bb"],y.needOrder]]),A]),Object(s["n"])("div",J,[Object(s["r"])(C,{modelValue:y.stopTime,"onUpdate:modelValue":t[7]||(t[7]=function(e){return y.stopTime=e}),type:"datetime",placeholder:"问卷收集截止时间"},null,8,["modelValue"])])])]),Object(s["n"])("div",R,[Object(s["n"])("div",E,[Object(s["n"])("div",M,[Object(s["ib"])(Object(s["n"])("input",{id:"titleContent",type:"text",placeholder:"问卷标题","onUpdate:modelValue":t[8]||(t[8]=function(e){return y.titleContent=e})},null,512),[[s["db"],y.titleContent]])]),Object(s["n"])("div",_,[Object(s["ib"])(Object(s["n"])("textarea",{id:"introContent","onUpdate:modelValue":t[9]||(t[9]=function(e){return m.info=e})},null,512),[[s["db"],this.info]])]),Object(s["r"])(s["f"],{tag:"div",class:"container"},{default:Object(s["hb"])((function(){return[(Object(s["J"])(!0),Object(s["m"])(s["b"],null,Object(s["Q"])(y.survey,(function(e){return Object(s["J"])(),Object(s["m"])("div",{class:"surveyContent",key:e.index,draggable:"!ques.status",onDragstart:function(t){return g.handleDragStart(t,e)},onDragover:Object(s["kb"])((function(t){return g.handleDragOver(t,e)}),["prevent"]),onDragenter:function(t){return g.handleDragEnter(t,e)},onDragend:function(t){return g.handleDragEnd(t,e)}},[1==e.type?(Object(s["J"])(),Object(s["k"])(T,{key:0,needOrder:m.needOrder,number:e.number,status:e.status,theTitle:e.title,theDescription:e.description,theChoices:e.choices,theMust:e.must,readOnly:m.readOnly,onResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","readOnly","onResult"])):Object(s["l"])("",!0),2==e.type?(Object(s["J"])(),Object(s["k"])($,{key:1,needOrder:m.needOrder,number:e.number,status:e.status,theTitle:e.title,theDescription:e.description,theChoices:e.choices,theMust:e.must,readOnly:m.readOnly,onResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","readOnly","onResult"])):Object(s["l"])("",!0),3==e.type?(Object(s["J"])(),Object(s["k"])(x,{key:2,needOrder:m.needOrder,number:e.number,status:e.status,theTitle:e.title,theDescription:e.description,theMust:e.must,readOnly:m.readOnly,onResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","readOnly","onResult"])):Object(s["l"])("",!0),4==e.type?(Object(s["J"])(),Object(s["k"])(D,{key:3,needOrder:m.needOrder,number:e.number,status:e.status,theTitle:e.title,theDescription:e.description,theMust:e.must,theChoices:e.choices,readOnly:m.readOnly,onResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","theChoices","readOnly","onResult"])):Object(s["l"])("",!0),5==e.type?(Object(s["J"])(),Object(s["k"])(P,{key:4,needOrder:m.needOrder,number:e.number,status:e.status,theTitle:e.title,theDescription:e.description,theMust:e.must,readOnly:m.readOnly,onResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","readOnly","onResult"])):Object(s["l"])("",!0),0==e.status?(Object(s["J"])(),Object(s["m"])("div",V,[Object(s["r"])(j,{onClick:function(t){return g.modify(e.number)}},{default:Object(s["hb"])((function(){return[I]})),_:2},1032,["onClick"]),Object(s["r"])(j,{onClick:function(t){return g.backspace(e.number)}},{default:Object(s["hb"])((function(){return[U]})),_:2},1032,["onClick"]),Object(s["r"])(j,{onClick:function(t){return g.copy(e.number)}},{default:Object(s["hb"])((function(){return[L]})),_:2},1032,["onClick"])])):Object(s["l"])("",!0)],40,B)})),128))]})),_:1})])])])],64)}Object(s["K"])();var z=n("2909"),F=(n("a434"),n("99af"),n("9911"),n("5526")),H=n("7737"),K=n("e25f"),N=n("ff0c"),Q=n("d43d"),G=n("1bab"),W={components:{Radio:F["a"],Checkbox:H["a"],Text:K["a"],Evaluation:N["a"],Judge:Q["a"]},data:function(){return{question:{type:"",number:"",status:"",title:"",description:"",must:"",choices:[]},dragging:null,survey:[],counter:1,newPos:"",oldPos:"",readOnly:!0,needOrder:!0,titleContent:"",stopTime:"",info:"为了给您提供更好的服务，希望您能抽出几分钟时间，将您的感受和建议告诉我们，我们非常重视每位用户的宝贵意见，期待您的参与！现在我们就马上开始吧！"}},created:function(){var e=this;this.$store.state.isLogin?2333333!=this.$route.query.id&&Object(G["a"])({url:"/survey",method:"get",params:{id:this.$route.query.id,userid:this.$store.state.userid,editStatus:1}}).then((function(t){console.log(t),e.survey=t.data.survey,e.needOrder=t.data.needOrder,e.titleContent=t.data.titleContent,e.info=t.data.info,e.stopTime=t.data.stopTime,e.counter=e.survey.length+1})):this.$router.push("/tologin")},methods:{tomanage:function(){var e=this;this.$confirm("跳转页面将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/tomanage")}))},tohome:function(){var e=this;this.$confirm("回到主页将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){e.$router.push("/")}))},addRadio:function(){if(this.survey.length>0)for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var t={title:"",description:"",type:1,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(t),this.counter++},addCheckbox:function(){if(this.survey.length>0)for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var t={title:"",description:"",type:2,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(t),this.counter++,console.log(this.survey)},addText:function(){if(this.survey.length>0)for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var t={title:"",description:"",type:3,status:1,must:!0,number:this.counter};this.survey.push(t),this.counter++,console.log(this.survey)},addEvaluation:function(){if(this.survey.length>0)for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var t={title:"",description:"",type:4,status:1,must:!0,number:this.counter,choices:5};this.survey.push(t),this.counter++,console.log(this.survey)},addJudge:function(){if(this.survey.length>0)for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var t={title:"",description:"",type:5,status:1,must:!0,number:this.counter};this.survey.push(t),this.counter++,console.log(this.survey)},change:function(e,t){if(console.log(this.survey),0==t){this.survey.splice(e-1,1);for(var n=this.survey.length,s=0;s<n;s++)this.survey[s].number=s+1;this.counter--,this.$message({message:"成功删除",type:"success"})}else this.survey[e.number-1]=e,this.$message({message:"成功添加",type:"success"});console.log(this.survey)},modify:function(e){for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey[e-1].status=1},backspace:function(e){for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey.splice(e-1,1),this.counter--;for(var n=this.survey.length,s=e-1;s<n;s++)this.survey[s].number--;console.log(this.survey)},copy:function(e){for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var n={type:this.survey[e-1].type,status:this.survey[e-1].status,number:this.counter,title:this.survey[e-1].title,description:this.survey[e-1].description,must:this.survey[e-1].must,choices:this.survey[e-1].choices};this.survey.push(n),this.counter++;var s=document.body.clientHeight;window.scroll({top:s,left:0,behavior:"smooth"})},handleDragStart:function(e,t){for(var n in this.survey)if("1"==this.survey[n].status)return void this.$message("请先完成或取消当前问题的编辑");this.dragging=t},handleDragEnd:function(e,t){this.dragging=null},handleDragOver:function(e){null!=this.dragging&&(e.dataTransfer.dropEffect="move")},handleDragEnter:function(e,t){if(null!=this.dragging&&(e.dataTransfer.effectAllowed="move",t!==this.dragging)){var n=Object(z["a"])(this.survey);console.log(n);var s=n.indexOf(this.dragging),r=n.indexOf(t);n.splice.apply(n,[r,0].concat(Object(z["a"])(n.splice(s,1)))),this.survey=n;for(var i=this.survey.length,o=0;o<i;o++)this.survey[o].number=o+1}},saveSurvey:function(){var e=this;if(0!=this.survey.length){for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):Object(G["a"])({url:"/edit",method:"post",data:{type:1,class:1,userid:this.$store.state.userid,survey:this.survey,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(t){console.log(t),1==t.data.res&&(e.$message({message:"保存问卷成功",type:"success"}),e.$router.push({path:"/tomanage"}))}))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})},releaseSurvey:function(){var e=this;if(0!=this.survey.length){for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):(console.log(this.$store.state.userid),Object(G["a"])({url:"/edit",method:"post",data:{type:2,class:1,survey:this.survey,userid:this.$store.state.userid,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(t){console.log(t),e.$msgbox({title:"问卷链接和二维码",message:Object(s["u"])("div",{style:"text-align: center"},[Object(s["u"])("div",null,t.data.link),Object(s["u"])("div",{style:"display: flex; justify-content: center; padding-top: 20px"},Object(s["u"])("img",{src:t.data.photo}))]),showCancelButton:!1,confirmButtonText:"确定",showClose:!1}).then((function(t){e.$router.push({path:"/tomanage"})}))})))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})}}};n("2dd2");W.render=P,W.__scopeId="data-v-57f6495e";t["default"]=W},"10ec":function(e,t,n){},2909:function(e,t,n){"use strict";function s(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function r(e){if(Array.isArray(e))return s(e)}n.d(t,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n("fb6a"),n("b0c0");function o(e,t){if(e){if("string"===typeof e)return s(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(e,t):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(e){return r(e)||i(e)||o(e)||u()}},"2dd2":function(e,t,n){"use strict";n("10ec")},"4df4":function(e,t,n){"use strict";var s=n("0366"),r=n("7b0b"),i=n("9bdd"),o=n("e95a"),u=n("50c4"),a=n("8418"),c=n("35a1");e.exports=function(e){var t,n,l,d,h,f,v=r(e),b="function"==typeof this?this:Array,y=arguments.length,p=y>1?arguments[1]:void 0,g=void 0!==p,m=c(v),O=0;if(g&&(p=s(p,y>2?arguments[2]:void 0,2)),void 0==m||b==Array&&o(m))for(t=u(v.length),n=new b(t);t>O;O++)f=g?p(v[O],O):v[O],a(n,O,f);else for(d=m.call(v),h=d.next,n=new b;!(l=h.call(d)).done;O++)f=g?i(d,p,[l.value,O],!0):l.value,a(n,O,f);return n.length=O,n}},"857a":function(e,t,n){var s=n("1d80"),r=n("577e"),i=/"/g;e.exports=function(e,t,n,o){var u=r(s(e)),a="<"+t;return""!==n&&(a+=" "+n+'="'+r(o).replace(i,"&quot;")+'"'),a+">"+u+"</"+t+">"}},9911:function(e,t,n){"use strict";var s=n("23e7"),r=n("857a"),i=n("af03");s({target:"String",proto:!0,forced:i("link")},{link:function(e){return r(this,"a","href",e)}})},"99af":function(e,t,n){"use strict";var s=n("23e7"),r=n("d039"),i=n("e8b5"),o=n("861d"),u=n("7b0b"),a=n("50c4"),c=n("8418"),l=n("65f0"),d=n("1dde"),h=n("b622"),f=n("2d00"),v=h("isConcatSpreadable"),b=9007199254740991,y="Maximum allowed index exceeded",p=f>=51||!r((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=d("concat"),m=function(e){if(!o(e))return!1;var t=e[v];return void 0!==t?!!t:i(e)},O=!p||!g;s({target:"Array",proto:!0,forced:O},{concat:function(e){var t,n,s,r,i,o=u(this),d=l(o,0),h=0;for(t=-1,s=arguments.length;t<s;t++)if(i=-1===t?o:arguments[t],m(i)){if(r=a(i.length),h+r>b)throw TypeError(y);for(n=0;n<r;n++,h++)n in i&&c(d,h,i[n])}else{if(h>=b)throw TypeError(y);c(d,h++,i)}return d.length=h,d}})},"9bdd":function(e,t,n){var s=n("825a"),r=n("2a62");e.exports=function(e,t,n,i){try{return i?t(s(n)[0],n[1]):t(n)}catch(o){throw r(e),o}}},a630:function(e,t,n){var s=n("23e7"),r=n("4df4"),i=n("1c7e"),o=!i((function(e){Array.from(e)}));s({target:"Array",stat:!0,forced:o},{from:r})},af03:function(e,t,n){var s=n("d039");e.exports=function(e){return s((function(){var t=""[e]('"');return t!==t.toLowerCase()||t.split('"').length>3}))}},b0c0:function(e,t,n){var s=n("83ab"),r=n("9bf2").f,i=Function.prototype,o=i.toString,u=/^\s*function ([^ (]*)/,a="name";s&&!(a in i)&&r(i,a,{configurable:!0,get:function(){try{return o.call(this).match(u)[1]}catch(e){return""}}})},d28b:function(e,t,n){var s=n("746f");s("iterator")},fb6a:function(e,t,n){"use strict";var s=n("23e7"),r=n("861d"),i=n("e8b5"),o=n("23cb"),u=n("50c4"),a=n("fc6a"),c=n("8418"),l=n("b622"),d=n("1dde"),h=d("slice"),f=l("species"),v=[].slice,b=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(e,t){var n,s,l,d=a(this),h=u(d.length),y=o(e,h),p=o(void 0===t?h:t,h);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return v.call(d,y,p);for(s=new(void 0===n?Array:n)(b(p-y,0)),l=0;y<p;y++,l++)y in d&&c(s,l,d[y]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-3578ebf7.db363e65.js.map