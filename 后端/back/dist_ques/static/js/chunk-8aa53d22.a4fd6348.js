(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-8aa53d22"],{"13b2":function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a");var r=n("7a23");Object(r["M"])("data-v-0ac9c906");var s={id:"nav"},i={id:"realNav"},o=Object(r["n"])("img",{src:"https://pic1.zhimg.com/v2-5dfc909d8627c054a6f66f978831a0de_1440w.jpg?source=172ae18b",alt:""},null,-1),a=Object(r["n"])("h1",null,"问卷星球",-1),u=Object(r["n"])("span",{style:{color:"rgb(71,157,230)"}},"考试问卷",-1),c={id:"btn"},l=Object(r["q"])("保存"),d=Object(r["q"])("发布"),h={id:"Edit"},f={id:"left"},b=Object(r["n"])("div",{class:"title"}," 题目控件 ",-1),v={class:"questionList"},y=Object(r["n"])("i",{class:"el-icon-success"},null,-1),p=Object(r["q"])(" 单选题 "),m=[y,p],g=Object(r["n"])("i",{class:"el-icon-s-fold"},null,-1),O=Object(r["q"])(" 多选题 "),j=[g,O],w=Object(r["n"])("i",{class:"el-icon-s-order"},null,-1),x=Object(r["q"])(" 填空题 "),C=[w,x],k=Object(r["n"])("i",{class:"el-icon-star-on"},null,-1),T=Object(r["q"])(" 评分题 "),A=[k,T],$=Object(r["n"])("i",{class:"el-icon-document-checked"},null,-1),S=Object(r["q"])(" 判断题 "),D=[$,S],E={class:"option"},q=Object(r["q"])(" 自动插入题号 "),J={class:"option"},R={id:"right"},M={id:"platform"},P={id:"surveyTitle"},_={id:"surveyIntro"},B=["onDragstart","onDragover","onDragenter","onDragend"],H={key:5,class:"tool"},V=Object(r["q"])("编辑"),I=Object(r["q"])("删除"),U=Object(r["q"])("复制");function L(t,e,n,y,p,g){var O=this,w=Object(r["S"])("el-button"),x=Object(r["S"])("el-date-picker"),k=Object(r["S"])("Radio"),T=Object(r["S"])("Checkbox"),$=Object(r["S"])("Text"),S=Object(r["S"])("Evaluation"),L=Object(r["S"])("Judge");return Object(r["J"])(),Object(r["m"])(r["b"],null,[Object(r["n"])("div",s,[Object(r["n"])("div",i,[o,a,Object(r["n"])("span",{onClick:e[0]||(e[0]=function(){return g.tomanage&&g.tomanage.apply(g,arguments)})},"个人问卷"),u]),Object(r["n"])("div",c,[Object(r["r"])(w,{id:"safe",onClick:g.saveSurvey},{default:Object(r["hb"])((function(){return[l]})),_:1},8,["onClick"]),Object(r["r"])(w,{id:"release",onClick:g.releaseSurvey},{default:Object(r["hb"])((function(){return[d]})),_:1},8,["onClick"])])]),Object(r["n"])("div",h,[Object(r["n"])("div",f,[b,Object(r["n"])("div",v,[Object(r["n"])("div",{class:"questionType",onClick:e[1]||(e[1]=function(){return g.addRadio&&g.addRadio.apply(g,arguments)})},m),Object(r["n"])("div",{class:"questionType",onClick:e[2]||(e[2]=function(){return g.addCheckbox&&g.addCheckbox.apply(g,arguments)})},j),Object(r["n"])("div",{class:"questionType",onClick:e[3]||(e[3]=function(){return g.addText&&g.addText.apply(g,arguments)})},C),Object(r["n"])("div",{class:"questionType",onClick:e[4]||(e[4]=function(){return g.addEvaluation&&g.addEvaluation.apply(g,arguments)})},A),Object(r["n"])("div",{class:"questionType",onClick:e[5]||(e[5]=function(){return g.addJudge&&g.addJudge.apply(g,arguments)})},D),Object(r["n"])("div",E,[Object(r["ib"])(Object(r["n"])("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=function(t){return p.needOrder=t}),style:{"margin-bottom":"20px"}},null,512),[[r["bb"],p.needOrder]]),q]),Object(r["n"])("div",J,[Object(r["r"])(x,{modelValue:p.stopTime,"onUpdate:modelValue":e[7]||(e[7]=function(t){return p.stopTime=t}),type:"datetime",placeholder:"问卷收集截止时间"},null,8,["modelValue"])])])]),Object(r["n"])("div",R,[Object(r["n"])("div",M,[Object(r["n"])("div",P,[Object(r["ib"])(Object(r["n"])("input",{id:"titleContent",type:"text",placeholder:"问卷标题","onUpdate:modelValue":e[8]||(e[8]=function(t){return p.titleContent=t})},null,512),[[r["db"],p.titleContent]])]),Object(r["n"])("div",_,[Object(r["ib"])(Object(r["n"])("textarea",{id:"introContent","onUpdate:modelValue":e[9]||(e[9]=function(t){return O.info=t})},null,512),[[r["db"],this.info]])]),Object(r["r"])(r["f"],{tag:"div",class:"container"},{default:Object(r["hb"])((function(){return[(Object(r["J"])(!0),Object(r["m"])(r["b"],null,Object(r["Q"])(p.survey,(function(t){return Object(r["J"])(),Object(r["m"])("div",{class:"surveyContent",key:t.index,draggable:"!ques.status",onDragstart:function(e){return g.handleDragStart(e,t)},onDragover:Object(r["kb"])((function(e){return g.handleDragOver(e,t)}),["prevent"]),onDragenter:function(e){return g.handleDragEnter(e,t)},onDragend:function(e){return g.handleDragEnd(e,t)}},[1==t.type?(Object(r["J"])(),Object(r["k"])(k,{key:0,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theChoices:t.choices,theMust:t.must,thePoint:t.point,theCorrectAnswer:t.correctAnswer,readOnly:O.readOnly,examStatus:O.examStatus,onExamResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","thePoint","theCorrectAnswer","readOnly","examStatus","onExamResult"])):Object(r["l"])("",!0),2==t.type?(Object(r["J"])(),Object(r["k"])(T,{key:1,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theChoices:t.choices,theMust:t.must,thePoint:t.point,theCorrectAnswer:t.correctAnswer,readOnly:O.readOnly,examStatus:O.examStatus,onExamResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","thePoint","theCorrectAnswer","readOnly","examStatus","onExamResult"])):Object(r["l"])("",!0),3==t.type?(Object(r["J"])(),Object(r["k"])($,{key:2,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,thePoint:t.point,theCorrectAnswer:t.correctAnswer,readOnly:O.readOnly,examStatus:O.examStatus,onExamResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","thePoint","theCorrectAnswer","readOnly","examStatus","onExamResult"])):Object(r["l"])("",!0),4==t.type?(Object(r["J"])(),Object(r["k"])(S,{key:3,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,theChoices:t.choices,thePoint:t.point,theCorrectAnswer:t.correctAnswer,readOnly:O.readOnly,examStatus:O.examStatus,onExamResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","theChoices","thePoint","theCorrectAnswer","readOnly","examStatus","onExamResult"])):Object(r["l"])("",!0),5==t.type?(Object(r["J"])(),Object(r["k"])(L,{key:4,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,thePoint:t.point,theCorrectAnswer:t.correctAnswer,readOnly:O.readOnly,examStatus:O.examStatus,onExamResult:g.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","thePoint","theCorrectAnswer","readOnly","examStatus","onExamResult"])):Object(r["l"])("",!0),0==t.status?(Object(r["J"])(),Object(r["m"])("div",H,[Object(r["r"])(w,{onClick:function(e){return g.modify(t.number)}},{default:Object(r["hb"])((function(){return[V]})),_:2},1032,["onClick"]),Object(r["r"])(w,{onClick:function(e){return g.backspace(t.number)}},{default:Object(r["hb"])((function(){return[I]})),_:2},1032,["onClick"]),Object(r["r"])(w,{onClick:function(e){return g.copy(t.number)}},{default:Object(r["hb"])((function(){return[U]})),_:2},1032,["onClick"])])):Object(r["l"])("",!0)],40,B)})),128))]})),_:1})])])])],64)}Object(r["K"])();var z=n("2909"),F=(n("a434"),n("99af"),n("9911"),n("5526")),K=n("7737"),N=n("e25f"),Q=n("ff0c"),G=n("d43d"),W=n("1bab"),X={components:{Radio:F["a"],Checkbox:K["a"],Text:N["a"],Evaluation:Q["a"],Judge:G["a"]},data:function(){return{dragging:null,examStatus:!0,survey:[],counter:1,newPos:"",oldPos:"",readOnly:!0,needOrder:!0,titleContent:"",stopTime:"",info:"为了给您提供更好的服务，希望您能抽出几分钟时间，将您的感受和建议告诉我们，我们非常重视每位用户的宝贵意见，期待您的参与！现在我们就马上开始吧！"}},created:function(){var t=this;if(this.$store.state.isLogin){if(2333333==this.$route.query.id){var e={type:3,number:1,status:0,title:"学号",description:" ",must:!0,choices:[],point:"",correctAnswer:""},n={type:3,number:2,status:0,title:"姓名",description:" ",must:!0,choices:[],point:"",correctAnswer:""};return this.survey.push(e),this.survey.push(n),void(this.counter=3)}Object(W["a"])({url:"/survey",method:"get",params:{id:this.$route.query.id,userid:this.$store.state.userid,editStatus:1}}).then((function(e){console.log(e),t.survey=e.data.survey,t.needOrder=e.data.needOrder,t.titleContent=e.data.titleContent,t.info=e.data.info,t.counter=t.survey.length+1,t.stopTime=e.data.stopTime}))}else this.$router.push("/tologin")},methods:{tomanage:function(){var t=this;this.$confirm("跳转页面将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/tomanage")}))},tohome:function(){var t=this;this.$confirm("回到主页将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/")}))},addRadio:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",point:"",correctAnswer:"",type:1,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(e),this.counter++;var n=document.body.clientHeight;window.scroll({top:n,left:0,behavior:"smooth"})},addCheckbox:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",point:"",correctAnswer:"",type:2,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(e),this.counter++,console.log(this.survey);var n=document.body.clientHeight;window.scroll({top:n,left:0,behavior:"smooth"})},addText:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",point:"",correctAnswer:"",type:3,status:1,must:!0,number:this.counter};this.survey.push(e),this.counter++,console.log(this.survey);var n=document.body.clientHeight;window.scroll({top:n,left:0,behavior:"smooth"})},addEvaluation:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",point:"",correctAnswer:"",type:4,status:1,must:!0,number:this.counter,choices:5};this.survey.push(e),this.counter++,console.log(this.survey);var n=document.body.clientHeight;window.scroll({top:n,left:0,behavior:"smooth"})},addJudge:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",point:"",correctAnswer:"",type:5,status:1,must:!0,number:this.counter};this.survey.push(e),this.counter++,console.log(this.survey);var n=document.body.clientHeight;window.scroll({top:n,left:0,behavior:"smooth"})},change:function(t,e){if(console.log(this.survey),0==e){this.survey.splice(t-1,1);for(var n=this.survey.length,r=0;r<n;r++)this.survey[r].number=r+1;this.counter--,this.$message({message:"成功删除",type:"success"})}else this.survey[t.number-1]=t,this.$message({message:"成功添加",type:"success"});console.log(this.survey)},modify:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey[t-1].status=1},backspace:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey.splice(t-1,1),this.counter--;for(var n=this.survey.length,r=t-1;r<n;r++)this.survey[r].number--},copy:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var n={type:this.survey[t-1].type,status:this.survey[t-1].status,number:this.counter,title:this.survey[t-1].title,description:this.survey[t-1].description,must:this.survey[t-1].must,choices:this.survey[t-1].choices};this.survey.push(n),this.counter++;var r=document.body.clientHeight;window.scroll({top:r,left:0,behavior:"smooth"})},handleDragStart:function(t,e){for(var n in this.survey)if("1"==this.survey[n].status)return void this.$message("请先完成或取消当前问题的编辑");this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){null!=this.dragging&&(t.dataTransfer.dropEffect="move")},handleDragEnter:function(t,e){if(null!=this.dragging&&(t.dataTransfer.effectAllowed="move",e!==this.dragging)){var n=Object(z["a"])(this.survey);console.log(n);var r=n.indexOf(this.dragging),s=n.indexOf(e);n.splice.apply(n,[s,0].concat(Object(z["a"])(n.splice(r,1)))),this.survey=n;for(var i=this.survey.length,o=0;o<i;o++)this.survey[o].number=o+1}},saveSurvey:function(){var t=this;if(0!=this.survey.length){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):Object(W["a"])({url:"/edit",method:"post",data:{type:1,userid:this.$store.state.userid,class:4,survey:this.survey,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(e){console.log(e),1==e.data.res&&(t.$message({message:"保存问卷成功",type:"success"}),t.$router.push({path:"/tomanage"}))}))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})},releaseSurvey:function(){var t=this;if(0!=this.survey.length){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):Object(W["a"])({url:"/edit",method:"post",data:{type:2,userid:this.$store.state.userid,class:4,survey:this.survey,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(e){console.log(e),t.$msgbox({title:"问卷链接和二维码",message:Object(r["u"])("div",{style:"text-align: center"},[Object(r["u"])("div",null,e.data.link),Object(r["u"])("div",{style:"display: flex; justify-content: center; padding-top: 20px"},Object(r["u"])("img",{src:e.data.photo}))]),showCancelButton:!1,confirmButtonText:"确定",showClose:!1}).then((function(e){t.$router.push({path:"/tomanage"})}))}))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})}}};n("9a9c");X.render=L,X.__scopeId="data-v-0ac9c906";e["default"]=X},2909:function(t,e,n){"use strict";function r(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function s(t){if(Array.isArray(t))return r(t)}n.d(e,"a",(function(){return u}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function o(t,e){if(t){if("string"===typeof t)return r(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?r(t,e):void 0}}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function u(t){return s(t)||i(t)||o(t)||a()}},"4df4":function(t,e,n){"use strict";var r=n("0366"),s=n("7b0b"),i=n("9bdd"),o=n("e95a"),a=n("50c4"),u=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,d,h,f,b=s(t),v="function"==typeof this?this:Array,y=arguments.length,p=y>1?arguments[1]:void 0,m=void 0!==p,g=c(b),O=0;if(m&&(p=r(p,y>2?arguments[2]:void 0,2)),void 0==g||v==Array&&o(g))for(e=a(b.length),n=new v(e);e>O;O++)f=m?p(b[O],O):b[O],u(n,O,f);else for(d=g.call(b),h=d.next,n=new v;!(l=h.call(d)).done;O++)f=m?i(d,p,[l.value,O],!0):l.value,u(n,O,f);return n.length=O,n}},"857a":function(t,e,n){var r=n("1d80"),s=n("577e"),i=/"/g;t.exports=function(t,e,n,o){var a=s(r(t)),u="<"+e;return""!==n&&(u+=" "+n+'="'+s(o).replace(i,"&quot;")+'"'),u+">"+a+"</"+e+">"}},"88b0":function(t,e,n){},9911:function(t,e,n){"use strict";var r=n("23e7"),s=n("857a"),i=n("af03");r({target:"String",proto:!0,forced:i("link")},{link:function(t){return s(this,"a","href",t)}})},"99af":function(t,e,n){"use strict";var r=n("23e7"),s=n("d039"),i=n("e8b5"),o=n("861d"),a=n("7b0b"),u=n("50c4"),c=n("8418"),l=n("65f0"),d=n("1dde"),h=n("b622"),f=n("2d00"),b=h("isConcatSpreadable"),v=9007199254740991,y="Maximum allowed index exceeded",p=f>=51||!s((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),m=d("concat"),g=function(t){if(!o(t))return!1;var e=t[b];return void 0!==e?!!e:i(t)},O=!p||!m;r({target:"Array",proto:!0,forced:O},{concat:function(t){var e,n,r,s,i,o=a(this),d=l(o,0),h=0;for(e=-1,r=arguments.length;e<r;e++)if(i=-1===e?o:arguments[e],g(i)){if(s=u(i.length),h+s>v)throw TypeError(y);for(n=0;n<s;n++,h++)n in i&&c(d,h,i[n])}else{if(h>=v)throw TypeError(y);c(d,h++,i)}return d.length=h,d}})},"9a9c":function(t,e,n){"use strict";n("88b0")},"9bdd":function(t,e,n){var r=n("825a"),s=n("2a62");t.exports=function(t,e,n,i){try{return i?e(r(n)[0],n[1]):e(n)}catch(o){throw s(t),o}}},a630:function(t,e,n){var r=n("23e7"),s=n("4df4"),i=n("1c7e"),o=!i((function(t){Array.from(t)}));r({target:"Array",stat:!0,forced:o},{from:s})},af03:function(t,e,n){var r=n("d039");t.exports=function(t){return r((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0c0:function(t,e,n){var r=n("83ab"),s=n("9bf2").f,i=Function.prototype,o=i.toString,a=/^\s*function ([^ (]*)/,u="name";r&&!(u in i)&&s(i,u,{configurable:!0,get:function(){try{return o.call(this).match(a)[1]}catch(t){return""}}})},d28b:function(t,e,n){var r=n("746f");r("iterator")},fb6a:function(t,e,n){"use strict";var r=n("23e7"),s=n("861d"),i=n("e8b5"),o=n("23cb"),a=n("50c4"),u=n("fc6a"),c=n("8418"),l=n("b622"),d=n("1dde"),h=d("slice"),f=l("species"),b=[].slice,v=Math.max;r({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,r,l,d=u(this),h=a(d.length),y=o(t,h),p=o(void 0===e?h:e,h);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?s(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(d,y,p);for(r=new(void 0===n?Array:n)(v(p-y,0)),l=0;y<p;y++,l++)y in d&&c(r,l,d[y]);return r.length=l,r}})}}]);
//# sourceMappingURL=chunk-8aa53d22.a4fd6348.js.map