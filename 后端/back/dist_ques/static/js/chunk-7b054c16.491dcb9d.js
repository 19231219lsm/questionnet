(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-7b054c16"],{"17b4":function(t,e,n){"use strict";n("df5d")},2909:function(t,e,n){"use strict";function s(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,s=new Array(e);n<e;n++)s[n]=t[n];return s}function r(t){if(Array.isArray(t))return s(t)}n.d(e,"a",(function(){return a}));n("a4d3"),n("e01a"),n("d3b7"),n("d28b"),n("3ca3"),n("ddb0"),n("a630");function i(t){if("undefined"!==typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}n("fb6a"),n("b0c0");function o(t,e){if(t){if("string"===typeof t)return s(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?s(t,e):void 0}}function u(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t){return r(t)||i(t)||o(t)||u()}},"29c8":function(t,e,n){"use strict";n.r(e);n("a4d3"),n("e01a");var s=n("7a23");Object(s["M"])("data-v-8873c316");var r={id:"nav"},i={id:"realNav"},o=Object(s["n"])("img",{src:"https://pic1.zhimg.com/v2-5dfc909d8627c054a6f66f978831a0de_1440w.jpg?source=172ae18b",alt:""},null,-1),u=Object(s["n"])("h1",null,"问卷星球",-1),a=Object(s["n"])("span",{style:{color:"rgb(71,157,230)"}},"投票问卷",-1),c={id:"btn"},l=Object(s["q"])("保存"),d=Object(s["q"])("发布"),h={id:"Edit"},f={id:"left"},b=Object(s["n"])("div",{class:"title"}," 题目控件 ",-1),v={class:"questionList"},y=Object(s["n"])("i",{class:"el-icon-success"},null,-1),p=Object(s["q"])(" 单选题 "),g=[y,p],m=Object(s["n"])("i",{class:"el-icon-s-fold"},null,-1),O=Object(s["q"])(" 多选题 "),j=[m,O],C=Object(s["n"])("i",{class:"el-icon-s-order"},null,-1),k=Object(s["q"])(" 填空题 "),T=[C,k],$=Object(s["n"])("i",{class:"el-icon-star-on"},null,-1),w=Object(s["q"])(" 评分题 "),x=[$,w],D=Object(s["n"])("i",{class:"el-icon-document-checked"},null,-1),q=Object(s["q"])(" 判断题 "),S=[D,q],A={class:"option",style:{"margin-bottom":"20px"}},J=Object(s["q"])(" 自动插入题号 "),R={class:"option"},E={id:"right"},M={id:"platform"},_={id:"surveyTitle"},B={id:"surveyIntro"},V=["onDragstart","onDragover","onDragenter","onDragend"],I={key:5,class:"tool"},U=Object(s["q"])("编辑"),L=Object(s["q"])("删除"),P=Object(s["q"])("复制");function z(t,e,n,y,p,m){var O=this,C=Object(s["S"])("el-button"),k=Object(s["S"])("el-date-picker"),$=Object(s["S"])("Radio"),w=Object(s["S"])("Checkbox"),D=Object(s["S"])("Text"),q=Object(s["S"])("Evaluation"),z=Object(s["S"])("Judge");return Object(s["J"])(),Object(s["m"])(s["b"],null,[Object(s["n"])("div",r,[Object(s["n"])("div",i,[o,u,Object(s["n"])("span",{onClick:e[0]||(e[0]=function(){return m.tomanage&&m.tomanage.apply(m,arguments)})},"个人问卷"),a]),Object(s["n"])("div",c,[Object(s["r"])(C,{id:"safe",onClick:m.saveSurvey},{default:Object(s["hb"])((function(){return[l]})),_:1},8,["onClick"]),Object(s["r"])(C,{id:"release",onClick:m.releaseSurvey},{default:Object(s["hb"])((function(){return[d]})),_:1},8,["onClick"])])]),Object(s["n"])("div",h,[Object(s["n"])("div",f,[b,Object(s["n"])("div",v,[Object(s["n"])("div",{class:"questionType",onClick:e[1]||(e[1]=function(){return m.addRadio&&m.addRadio.apply(m,arguments)})},g),Object(s["n"])("div",{class:"questionType",onClick:e[2]||(e[2]=function(){return m.addCheckbox&&m.addCheckbox.apply(m,arguments)})},j),Object(s["n"])("div",{class:"questionType",onClick:e[3]||(e[3]=function(){return m.addText&&m.addText.apply(m,arguments)})},T),Object(s["n"])("div",{class:"questionType",onClick:e[4]||(e[4]=function(){return m.addEvaluation&&m.addEvaluation.apply(m,arguments)})},x),Object(s["n"])("div",{class:"questionType",onClick:e[5]||(e[5]=function(){return m.addJudge&&m.addJudge.apply(m,arguments)})},S),Object(s["n"])("div",A,[Object(s["ib"])(Object(s["n"])("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=function(t){return p.needOrder=t})},null,512),[[s["bb"],p.needOrder]]),J]),Object(s["n"])("div",R,[Object(s["r"])(k,{modelValue:p.stopTime,"onUpdate:modelValue":e[7]||(e[7]=function(t){return p.stopTime=t}),type:"datetime",placeholder:"问卷收集截止时间"},null,8,["modelValue"])])])]),Object(s["n"])("div",E,[Object(s["n"])("div",M,[Object(s["n"])("div",_,[Object(s["ib"])(Object(s["n"])("input",{id:"titleContent",type:"text",placeholder:"问卷标题","onUpdate:modelValue":e[8]||(e[8]=function(t){return p.titleContent=t})},null,512),[[s["db"],p.titleContent]])]),Object(s["n"])("div",B,[Object(s["ib"])(Object(s["n"])("textarea",{id:"introContent","onUpdate:modelValue":e[9]||(e[9]=function(t){return O.info=t})},null,512),[[s["db"],this.info]])]),Object(s["r"])(s["f"],{tag:"div",class:"container"},{default:Object(s["hb"])((function(){return[(Object(s["J"])(!0),Object(s["m"])(s["b"],null,Object(s["Q"])(p.survey,(function(t){return Object(s["J"])(),Object(s["m"])("div",{class:"surveyContent",key:t.index,draggable:"!ques.status",onDragstart:function(e){return m.handleDragStart(e,t)},onDragover:Object(s["kb"])((function(e){return m.handleDragOver(e,t)}),["prevent"]),onDragenter:function(e){return m.handleDragEnter(e,t)},onDragend:function(e){return m.handleDragEnd(e,t)}},[1==t.type?(Object(s["J"])(),Object(s["k"])($,{key:0,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theChoices:t.choices,theMust:t.must,readOnly:O.readOnly,onResult:m.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","readOnly","onResult"])):Object(s["l"])("",!0),2==t.type?(Object(s["J"])(),Object(s["k"])(w,{key:1,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theChoices:t.choices,theMust:t.must,readOnly:O.readOnly,onResult:m.change},null,8,["needOrder","number","status","theTitle","theDescription","theChoices","theMust","readOnly","onResult"])):Object(s["l"])("",!0),3==t.type?(Object(s["J"])(),Object(s["k"])(D,{key:2,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,readOnly:O.readOnly,onResult:m.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","readOnly","onResult"])):Object(s["l"])("",!0),4==t.type?(Object(s["J"])(),Object(s["k"])(q,{key:3,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,theChoices:t.choices,readOnly:O.readOnly,onResult:m.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","theChoices","readOnly","onResult"])):Object(s["l"])("",!0),5==t.type?(Object(s["J"])(),Object(s["k"])(z,{key:4,needOrder:O.needOrder,number:t.number,status:t.status,theTitle:t.title,theDescription:t.description,theMust:t.must,readOnly:O.readOnly,onResult:m.change},null,8,["needOrder","number","status","theTitle","theDescription","theMust","readOnly","onResult"])):Object(s["l"])("",!0),0==t.status?(Object(s["J"])(),Object(s["m"])("div",I,[Object(s["r"])(C,{onClick:function(e){return m.modify(t.number)}},{default:Object(s["hb"])((function(){return[U]})),_:2},1032,["onClick"]),Object(s["r"])(C,{onClick:function(e){return m.backspace(t.number)}},{default:Object(s["hb"])((function(){return[L]})),_:2},1032,["onClick"]),Object(s["r"])(C,{onClick:function(e){return m.copy(t.number)}},{default:Object(s["hb"])((function(){return[P]})),_:2},1032,["onClick"])])):Object(s["l"])("",!0)],40,V)})),128))]})),_:1})])])])],64)}Object(s["K"])();var F=n("2909"),H=(n("a434"),n("99af"),n("9911"),n("5526")),K=n("7737"),N=n("e25f"),Q=n("ff0c"),G=n("d43d"),W=n("1bab"),X={components:{Radio:H["a"],Checkbox:K["a"],Text:N["a"],Evaluation:Q["a"],Judge:G["a"]},data:function(){return{dragging:null,survey:[],counter:1,newPos:"",oldPos:"",readOnly:!0,needOrder:!0,titleContent:"",stopTime:"",info:"为了给您提供更好的服务，希望您能抽出几分钟时间，将您的感受和建议告诉我们，我们非常重视每位用户的宝贵意见，期待您的参与！现在我们就马上开始吧！"}},created:function(){var t=this;if(this.$store.state.isLogin){if(2333333==this.$route.query.id){var e={type:1,number:1,status:0,title:"这是一道预设好的投票单选题",description:"选择你支持的对象",must:!0,choices:["我是一位普普通通的候选者","我是这次大赛的头号种子选手","我是被各种原因逼上梁山的打酱油路人","我是一位高不成低不就的老资历"]};return this.survey.push(e),void this.counter++}Object(W["a"])({url:"/survey",method:"get",params:{id:this.$route.query.id,editStatus:1,userid:this.$store.state.userid}}).then((function(e){console.log(e),t.survey=e.data.survey,t.needOrder=e.data.needOrder,t.titleContent=e.data.titleContent,t.info=e.data.info,t.stopTime=e.data.stopTime,t.counter=t.survey.length+1}))}else this.$router.push("/tologin")},methods:{tomanage:function(){var t=this;this.$confirm("跳转页面将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/tomanage")}))},tohome:function(){var t=this;this.$confirm("回到主页将不会保存您此次的编辑内容，是否继续？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){t.$router.push("/")}))},addRadio:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",type:1,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(e),this.counter++},addCheckbox:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",type:2,status:1,must:!0,number:this.counter,choices:["",""]};this.survey.push(e),this.counter++,console.log(this.survey)},addText:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",type:3,status:1,must:!0,number:this.counter};this.survey.push(e),this.counter++,console.log(this.survey)},addEvaluation:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",type:4,status:1,must:!0,number:this.counter,choices:5};this.survey.push(e),this.counter++,console.log(this.survey)},addJudge:function(){if(this.survey.length>0)for(var t in this.survey)if("1"==this.survey[t].status)return void this.$message("请先完成或取消当前问题的编辑");var e={title:"",description:"",type:5,status:1,must:!0,number:this.counter};this.survey.push(e),this.counter++,console.log(this.survey)},change:function(t,e){if(console.log(this.survey),0==e){this.survey.splice(t-1,1);for(var n=this.survey.length,s=0;s<n;s++)this.survey[s].number=s+1;this.counter--,this.$message({message:"成功删除",type:"success"})}else this.survey[t.number-1]=t,this.$message({message:"成功添加",type:"success"});console.log(this.survey)},modify:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey[t-1].status=1},backspace:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");this.survey.splice(t-1,1),this.counter--;for(var n=this.survey.length,s=t-1;s<n;s++)this.survey[s].number--},copy:function(t){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");var n={type:this.survey[t-1].type,status:this.survey[t-1].status,number:this.counter,title:this.survey[t-1].title,description:this.survey[t-1].description,must:this.survey[t-1].must,choices:this.survey[t-1].choices};this.survey.push(n),this.counter++;var s=document.body.clientHeight;window.scroll({top:s,left:0,behavior:"smooth"})},handleDragStart:function(t,e){for(var n in this.survey)if("1"==this.survey[n].status)return void this.$message("请先完成或取消当前问题的编辑");this.dragging=e},handleDragEnd:function(t,e){this.dragging=null},handleDragOver:function(t){null!=this.dragging&&(t.dataTransfer.dropEffect="move")},handleDragEnter:function(t,e){if(null!=this.dragging&&(t.dataTransfer.effectAllowed="move",e!==this.dragging)){var n=Object(F["a"])(this.survey);console.log(n);var s=n.indexOf(this.dragging),r=n.indexOf(e);n.splice.apply(n,[r,0].concat(Object(F["a"])(n.splice(s,1)))),this.survey=n;for(var i=this.survey.length,o=0;o<i;o++)this.survey[o].number=o+1}},saveSurvey:function(){var t=this;if(0!=this.survey.length){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):Object(W["a"])({url:"/edit",method:"post",data:{type:1,class:2,survey:this.survey,userid:this.$store.state.userid,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(e){console.log(e),1==e.data.res&&(t.$message({message:"保存问卷成功",type:"success"}),t.$router.push({path:"/tomanage"}))}))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})},releaseSurvey:function(){var t=this;if(0!=this.survey.length){for(var e in this.survey)if("1"==this.survey[e].status)return void this.$message("请先完成或取消当前问题的编辑");if(0!=this.titleContent.length)if(0!=this.stopTime.length){var n=new Date;this.stopTime<n?this.$message({message:"请设置有效的问卷截止时间",type:"warning"}):Object(W["a"])({url:"/edit",method:"post",data:{type:2,class:2,userid:this.$store.state.userid,survey:this.survey,needOrder:this.needOrder,titleContent:this.titleContent,info:this.info,stopTime:this.stopTime,id:this.$route.query.id}}).then((function(e){console.log(e),t.$msgbox({title:"问卷链接和二维码",message:Object(s["u"])("div",{style:"text-align: center"},[Object(s["u"])("div",null,e.data.link),Object(s["u"])("div",{style:"display: flex; justify-content: center; padding-top: 20px"},Object(s["u"])("img",{src:e.data.photo}))]),showCancelButton:!1,confirmButtonText:"确定",showClose:!1}).then((function(e){t.$router.push({path:"/tomanage"})}))}))}else this.$message({message:"请填写问卷收集截止时间",type:"warning"});else this.$message({message:"请填写问卷标题",type:"warning"})}else this.$message({message:"请为问卷设置至少一个问题",type:"warning"})}}};n("17b4");X.render=z,X.__scopeId="data-v-8873c316";e["default"]=X},"4df4":function(t,e,n){"use strict";var s=n("0366"),r=n("7b0b"),i=n("9bdd"),o=n("e95a"),u=n("50c4"),a=n("8418"),c=n("35a1");t.exports=function(t){var e,n,l,d,h,f,b=r(t),v="function"==typeof this?this:Array,y=arguments.length,p=y>1?arguments[1]:void 0,g=void 0!==p,m=c(b),O=0;if(g&&(p=s(p,y>2?arguments[2]:void 0,2)),void 0==m||v==Array&&o(m))for(e=u(b.length),n=new v(e);e>O;O++)f=g?p(b[O],O):b[O],a(n,O,f);else for(d=m.call(b),h=d.next,n=new v;!(l=h.call(d)).done;O++)f=g?i(d,p,[l.value,O],!0):l.value,a(n,O,f);return n.length=O,n}},"857a":function(t,e,n){var s=n("1d80"),r=n("577e"),i=/"/g;t.exports=function(t,e,n,o){var u=r(s(t)),a="<"+e;return""!==n&&(a+=" "+n+'="'+r(o).replace(i,"&quot;")+'"'),a+">"+u+"</"+e+">"}},9911:function(t,e,n){"use strict";var s=n("23e7"),r=n("857a"),i=n("af03");s({target:"String",proto:!0,forced:i("link")},{link:function(t){return r(this,"a","href",t)}})},"99af":function(t,e,n){"use strict";var s=n("23e7"),r=n("d039"),i=n("e8b5"),o=n("861d"),u=n("7b0b"),a=n("50c4"),c=n("8418"),l=n("65f0"),d=n("1dde"),h=n("b622"),f=n("2d00"),b=h("isConcatSpreadable"),v=9007199254740991,y="Maximum allowed index exceeded",p=f>=51||!r((function(){var t=[];return t[b]=!1,t.concat()[0]!==t})),g=d("concat"),m=function(t){if(!o(t))return!1;var e=t[b];return void 0!==e?!!e:i(t)},O=!p||!g;s({target:"Array",proto:!0,forced:O},{concat:function(t){var e,n,s,r,i,o=u(this),d=l(o,0),h=0;for(e=-1,s=arguments.length;e<s;e++)if(i=-1===e?o:arguments[e],m(i)){if(r=a(i.length),h+r>v)throw TypeError(y);for(n=0;n<r;n++,h++)n in i&&c(d,h,i[n])}else{if(h>=v)throw TypeError(y);c(d,h++,i)}return d.length=h,d}})},"9bdd":function(t,e,n){var s=n("825a"),r=n("2a62");t.exports=function(t,e,n,i){try{return i?e(s(n)[0],n[1]):e(n)}catch(o){throw r(t),o}}},a630:function(t,e,n){var s=n("23e7"),r=n("4df4"),i=n("1c7e"),o=!i((function(t){Array.from(t)}));s({target:"Array",stat:!0,forced:o},{from:r})},af03:function(t,e,n){var s=n("d039");t.exports=function(t){return s((function(){var e=""[t]('"');return e!==e.toLowerCase()||e.split('"').length>3}))}},b0c0:function(t,e,n){var s=n("83ab"),r=n("9bf2").f,i=Function.prototype,o=i.toString,u=/^\s*function ([^ (]*)/,a="name";s&&!(a in i)&&r(i,a,{configurable:!0,get:function(){try{return o.call(this).match(u)[1]}catch(t){return""}}})},d28b:function(t,e,n){var s=n("746f");s("iterator")},df5d:function(t,e,n){},fb6a:function(t,e,n){"use strict";var s=n("23e7"),r=n("861d"),i=n("e8b5"),o=n("23cb"),u=n("50c4"),a=n("fc6a"),c=n("8418"),l=n("b622"),d=n("1dde"),h=d("slice"),f=l("species"),b=[].slice,v=Math.max;s({target:"Array",proto:!0,forced:!h},{slice:function(t,e){var n,s,l,d=a(this),h=u(d.length),y=o(t,h),p=o(void 0===e?h:e,h);if(i(d)&&(n=d.constructor,"function"!=typeof n||n!==Array&&!i(n.prototype)?r(n)&&(n=n[f],null===n&&(n=void 0)):n=void 0,n===Array||void 0===n))return b.call(d,y,p);for(s=new(void 0===n?Array:n)(v(p-y,0)),l=0;y<p;y++,l++)y in d&&c(s,l,d[y]);return s.length=l,s}})}}]);
//# sourceMappingURL=chunk-7b054c16.491dcb9d.js.map